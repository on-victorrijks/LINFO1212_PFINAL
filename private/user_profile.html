<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>{{page.title}}</title>
  <meta name="description" content="{{page.description}}">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="/css/vars.css">
  <link rel="stylesheet" href="/css/global.css">
  <link rel="stylesheet" href="/css/menu.css">
  <link rel="stylesheet" href="/css/forms.css">
  <link rel="stylesheet" href="/css/user_profile.css">
  <link rel="stylesheet" href="/css/kotPreview.css">

</head>
<body>

    <div class="menuContainer">
        <div class="fixedBtn" id="mobileOpen">
            <img src="/imgs/icons/menu_black_24dp.svg" alt="logo"/>
        </div>
        <div class="fixedBtn" id="mobileClose" hidden="true">
            <img src="/imgs/icons/close_black_24dp.svg" alt="logo"/>
        </div>
    
        <div class="menu" id="menu" mobileHidden="true">
    
            <div class="menuElms">
    
                <div class="menuTopElements">
                    <a class="logo" href="/">
                        <img src="/imgs/logo.svg" id="logo_long" alt="logo"/>
                        <img src="/imgs/logo_mini.svg" id="logo_mini" alt="logo_mini"/>
                    </a>
                    {{#user}}
                    <a class="user" href="/account">
                        <div class="userImage">
                            <img src="https://localhost:8080/users/profilPicture/{{user._id}}" alt="user"/>
                        </div>
                        <div class="userText">
                            <h1>{{user.firstname}} {{user.lastname}}</h1>
                            <h2>Mon compte</h2>
                        </div>
                    </a>
                    {{/user}}
                    {{^user}}
                    <a class="registerorlogin" href="/login">
                        <h1>Se connecter / S'inscrire</h1>
                    </a>
                    {{/user}}
                </div>
                <div class="menuOptions">
    
                    <a class="option" selected="{{menu.selectedPage.home}}" href="/">
                        <div class="optionImage">
                            <img id="unselected" alt="menuOption" src="/imgs/icons/search_black_24dp.svg"/>
                            <img id="selected"   alt="menuOption" src="/imgs/icons/search_black_24dp_selected.svg"/>
                        </div>
                        <div class="optionName">
                            <h2>Accueil</h2>
                        </div>
                    </a>

                    {{#user}}
                    <a class="option" selected="{{menu.selectedPage.conversations}}" href="/conversations">
                        <div class="optionImage">
                            <img id="unselected" alt="menuOption" src="/imgs/icons/question_answer_black_24dp.svg"/>
                            <img id="selected"   alt="menuOption" src="/imgs/icons/question_answer_black_24dp_selected.svg"/>
                        </div>
                        <div class="optionName">
                            <h2>Messages</h2>
                        </div>
                    </a>
                    {{/user}}
                    {{^user}}
                    <a class="option" selected="{{menu.selectedPage.presentation}}" href="/presentation">
                        <div class="optionImage">
                            <img id="unselected" alt="menuOption" src="/imgs/icons/view_module_black_24dp.svg"/>
                            <img id="selected"   alt="menuOption" src="/imgs/icons/view_module_black_24dp_selected.svg"/>
                        </div>
                        <div class="optionName">
                            <h2>Présentation</h2>
                        </div>
                    </a>
                    {{/user}}
                    
                    {{#user}}
                    {{#isResident}}
                    <a class="option" selected="{{menu.selectedPage.favs}}" href="/kot/favs">
                        <div class="optionImage">
                            <img id="unselected" alt="menuOption" src="/imgs/icons/favorite_black_24dp.svg"/>
                            <img id="selected"   alt="menuOption" src="/imgs/icons/favorite_black_24dp_selected.svg"/>
                        </div>
                        <div class="optionName">
                            <h2>Mes favoris</h2>
                        </div>
                    </a>
                    {{/isResident}}
                    {{/user}}

                    {{#user}}
                    {{#isLandlord}}
                    <a class="option" selected="{{menu.selectedPage.publish}}" href="/kot/create">
                        <div class="optionImage">
                            <img id="unselected" alt="menuOption" src="/imgs/icons/add_black_24dp.svg"/>
                            <img id="selected"   alt="menuOption" src="/imgs/icons/add_black_24dp_selected.svg"/>
                        </div>
                        <div class="optionName">
                            <h2>Publier un kot</h2>
                        </div>
                    </a>
                    <a class="option" selected="{{menu.selectedPage.mykots}}" href="/kot/my">
                        <div class="optionImage">
                            <img id="unselected" alt="menuOption" src="/imgs/icons/home_black_24dp.svg"/>
                            <img id="selected"   alt="menuOption" src="/imgs/icons/home_black_24dp_selected.svg"/>
                        </div>
                        <div class="optionName">
                            <h2>Mes kots</h2>
                        </div>
                    </a>
                    {{/isLandlord}}
                    {{/user}}
    
                    <a class="option" selected="{{menu.selectedPage.contact}}" href="/contact">
                        <div class="optionImage">
                            <img id="unselected" alt="menuOption" src="/imgs/icons/call_black_24dp.svg"/>
                            <img id="selected"   alt="menuOption" src="/imgs/icons/call_black_24dp_selected.svg"/>
                        </div>
                        <div class="optionName">
                            <h2>Contact</h2>
                        </div>
                    </a>
    
                </div>
                
                {{#user}}
                <div class="otherBtns">
                    <a href="/account/settings">
                        <img src="/imgs/icons/settings_black_24dp.svg" alt="settings"/>
                    </a>
                    <a href="/disconnect">
                        <img src="/imgs/icons/logout_black_24dp.svg" alt="disconnect"/>
                    </a>
                </div>
                {{/user}}
    
            </div>
            
        </div>
    </div>

    <div class="g-background bgColor">

        <div class="g-content">
            
            <div class="infoUser">

                <div class="picContainer">
                    <img alt="creator_profilPic" src="https://localhost:8080/users/profilPicture/{{profilUser._id}}"/>
                </div>

                <div class="infoContainer">
                    <h1>{{profilUser.firstname}} {{profilUser.lastname}}</h1>
                    <div class="subInfo">
                        <img alt="email" src="/imgs/icons/mail_black_24dp.svg"/>
                        <h2>{{profilUser.email}}</h2>
                    </div>
                    <div class="subInfo">
                        <img alt="phonenumber" src="/imgs/icons/call_black_24dp.svg"/>
                        <h2>{{profilUser.phonenumber}}</h2>
                    </div>
                    {{#isLandlord}}
                    <div class="subInfo">
                        <img alt="accountType" src="/imgs/icons/done_black_24dp.svg"/>
                        <h2>Propriétaire</h2>
                    </div>
                    {{/isLandlord}}
                </div>

                <div class="buttonContainer">
                    {{#ownAccount}}
                    <a class="icon modify" href="/account/settings">Modifier le compte</a>
                    {{/ownAccount}}
                    {{^ownAccount}}
                    <a class="icon sendMessage" href="/conversations/create/fromprofile/{{profilUser._id}}">Envoyer un message</a>
                    {{/ownAccount}}
                </div>

            </div>

            {{#isResident}}
            <div class="userPreferences">
                {{#ownAccount}}
                <h2>Vos préférences</h2>
                {{/ownAccount}}
                {{^ownAccount}}
                <h2>Préférences de l'utilisateur</h2>
                {{/ownAccount}}
                <p>           
                    {{#profilUser.preferences}}
                        {{profilUser.preferences}}
                    {{/profilUser.preferences}}
                    {{^profilUser.preferences}}
                        <i>L'utilisateur n'a pas renseigné de préférences</i>
                    {{/profilUser.preferences}}
                </p>
            </div>
            {{/isResident}}

            {{#isLandlord}}
            <h1>Landlord's kots</h1> <!--//FIX-->
            {{/isLandlord}}
            {{^isLandlord}}
            <div class="favouritesKots">
                <h2>Kots favoris</h2>

                <div class="kotsContainer">
                {{#results}}
                <div class="kotPreview">

                    <div class="kotPic">
                        <div class="carrousel">
                            <img alt="mainImage" src="https://localhost:8080/users/kots/images/{{kot._id}}_{{kot.mainPictureName}}">
                        </div>
                        <div class="titleContainer">
                            <h1>{{kot.title}}</h1>
                        </div>
                        <div class="priceContainer">
                            <h2>{{kot.basePrice}}€</h2>
                            <h3>+ {{kot.chargePrice}}€</h3>
                        </div>
                        <div class="tagsContainer">
                            {{#kotTags.new}}
                            <div class="tag new">
                                <img src="../imgs/icons/new_releases_white_24dp.svg">
                                <p>NOUVEAU</p>
                                <div class="shine"></div>
                            </div>
                            {{/kotTags.new}}
                            {{#kotTags.owner}}
                            <div class="tag owner">
                                <img src="../imgs/icons/front_hand_white_24dp.svg">
                                <p>PROPRIO</p>
                                <div class="shine"></div>
                            </div>
                            {{/kotTags.owner}}
                        </div>
                    </div>
            
                    <div class="informationsContainer address">
                        <img src="../imgs/icons/near_me_black_24dp.svg">
                        <h2>{{kot.location.address}}</h2>
                    </div>

                    <div class="twoColumnsInfosContainer">
                        <div class="informationsContainer">
                            <img src="../imgs/icons/bedroom_parent_black_24dp.svg">
                            <h2>
                                {{kot.bedrooms}} chambres
                            </h2>
                        </div>
                        <div class="informationsContainer">
                            <img src="../imgs/icons/bathroom_black_24dp.svg">
                            <h2>
                                {{kot.bathrooms}} salles de bain
                            </h2>
                        </div>
                    </div>

                    <div class="twoColumnsInfosContainer">
                        <div class="informationsContainer">
                            <img src="../imgs/icons/lock_open_black_24dp.svg">
                            <h2>
                                {{#kot.isOpen}}
                                Disponible
                                {{/kot.isOpen}}
                                {{^kot.isOpen}}
                                Indisponible
                                {{/kot.isOpen}}
                            </h2>
                        </div>
                        <div class="informationsContainer">
                            <img src="../imgs/icons/groups_black_24dp.svg">
                            <h2>
                                {{#kot.isCollocation}}
                                Collocation
                                {{/kot.isCollocation}}
                                {{^kot.isCollocation}}
                                Ce n'est pas une collocation
                                {{/kot.isCollocation}}
                            </h2>
                        </div>
                    </div>
                    
                    <div class="tagsAndButtonsContainer">
                        <a href="/kot/profile/{{kot._id}}">Voir le Kot</a>
                    </div>
                    
                </div>
                {{/results}}
                {{^results}}
                <div class="noKot">
                    <h3>Cet utilisateur n'a pas mit de kot dans ses favoris</h3>
                </div>
                {{/results}}
                </div>
                
            </div>
            {{/isLandlord}}


        
        </div>
    
    </div>

</body>
<script src="/js/menu.js"></script>